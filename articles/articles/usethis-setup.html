<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>usethis setup • usethis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="usethis setup">
<meta property="og:description" content="usethis">
<meta property="og:image" content="https://usethis.r-lib.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">usethis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.9.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/articles/usethis-setup.html">Setup</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/pr-functions.html">Pull request helpers</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/">usethis 1.6.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/">usethis 1.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/usethis/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="usethis-setup_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="usethis-setup_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="usethis-setup_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>usethis setup</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/master/vignettes/articles/usethis-setup.Rmd"><code>vignettes/articles/usethis-setup.Rmd</code></a></small>
      <div class="hidden name"><code>usethis-setup.Rmd</code></div>

    </div>

    
    
<p>You will get the most out of usethis if you do some setup. These setup tasks do not need to be done all at once or even done at all. But usethis can offer the most support for package development and Git/GitHub workflows with some advance configuration. usethis can even help you with this!</p>
<p>Key steps that accelerate your R development workflow (details on <em>how</em> to do all this follow):</p>
<ul>
<li>Make usethis available in interactive R sessions.</li>
<li>Provide usethis with info to use in all new R packages you create.</li>
<li>Use the “sitrep” functions to get a health check or gather info when you’re going to ask for help.</li>
<li>Sign up for a free GitHub.com account, if you plan to use GitHub.</li>
<li>Install Git.</li>
<li>Configure your Git <code>user.name</code> and <code>user.email</code>.</li>
<li>If you use RStudio, make sure RStudio can find your Git executable. If you use GitHub, make sure you can pull/push from your local computer to GitHub.com, in general and from RStudio.</li>
<li>Get a personal access token from GitHub.com and make it available in R sessions.</li>
<li>Prepare your system to build R packages from source.</li>
</ul>
<div id="use-usethis-or-devtools-in-interactive-work" class="section level2">
<h2 class="hasAnchor">
<a href="#use-usethis-or-devtools-in-interactive-work" class="anchor"></a>Use usethis or devtools in interactive work</h2>
<p>The usethis package was carved out of the <a href="https://devtools.r-lib.org">devtools package</a> as part of its “conscious uncoupling” in <a href="https://www.tidyverse.org/blog/2018/10/devtools-2-0-0/">the v2.0.0 release</a>. But note that devtools makes all of usethis’s functions available and they should feel like they are part of devtools itself. In addition, devtools offers some functions of its own and exposes selected functionality from a few other packages. You might enjoy making devtools (and therefore usethis) available in all your interactive R work.</p>
<p>Call <code><a href="../../reference/rprofile-helper.html">usethis::use_devtools()</a></code> for prompts to do this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span> <span class="co">## or library(usethis)</span>

<span class="fu"><a href="../../reference/rprofile-helper.html">use_devtools</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This will:</p>
<ul>
<li>Open your <code>.Rprofile</code> startup file for editing.</li>
<li>Show the necessary code snippet in the console and put it on your clipboard.</li>
<li>Prompt you to paste, save, close, restart R. Done!</li>
</ul>
<p>The suggested snippet looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>More resources on <code>.Rprofile</code>:</p>
<ul>
<li>The official <a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/Startup.html">Startup documentation</a>
</li>
<li>The <a href="https://whattheyforgot.org/r-startup.html">Startup chapter</a> of the What They Forgot to Teach You About R workshop materials</li>
<li>Kevin Ushey’s blog post <a href="http://kevinushey.github.io/blog/2015/02/02/rprofile-essentials/">RProfile Essentials</a>
</li>
</ul>
</div>
<div id="store-default-values-for-description-fields-and-other-preferences" class="section level2">
<h2 class="hasAnchor">
<a href="#store-default-values-for-description-fields-and-other-preferences" class="anchor"></a>Store default values for DESCRIPTION fields and other preferences</h2>
<p>Certain options are consulted by usethis and allow you to set personal defaults:</p>
<ul>
<li>
<code>usethis.full_name</code>: consulted for making, e.g., supplemental license files.</li>
<li>
<code>usethis.protocol</code>: specifies your preferred transport protocol for Git. Either “https” or “ssh”. See the help for <code><a href="../../reference/git_protocol.html">git_protocol()</a></code> for more.</li>
<li>
<code>usethis.description</code>: named list of default DESCRIPTION fields for new packages made with <code><a href="../../reference/create_package.html">usethis::create_package()</a></code>.</li>
<li>
<code>usethis.quiet</code>: if <code>TRUE</code>, prevents usethis from printing messages to the console.</li>
<li>
<code>usethis.destdir</code>: a default directory to use in <code><a href="../../reference/create_from_github.html">create_from_github()</a></code> and <code><a href="../../reference/zip-utils.html">use_course()</a></code>.</li>
</ul>
<p>Define any of these options in your <code>.Rprofile</code>, which can be opened for editing via <code><a href="../../reference/edit.html">usethis::edit_r_profile()</a></code>. Here is example code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>
  usethis.full_name <span class="op">=</span> <span class="st">"Jane Doe"</span>,
  usethis.protocol  <span class="op">=</span> <span class="st">"ssh"</span>,
  usethis.description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">"Authors@R"</span> <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span>
        <span class="st">"Jane"</span>, <span class="st">"Doe"</span>,
        email <span class="op">=</span> <span class="st">"jane@example.com"</span>,
        role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span>,
        comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>ORCID <span class="op">=</span> <span class="st">"JANE'S-ORCID-ID"</span><span class="op">)</span>
    <span class="op">)</span>,
    Version <span class="op">=</span> <span class="st">"0.0.0.9000"</span>
  <span class="op">)</span>,
  usethis.destdir <span class="op">=</span> <span class="st">"~/the/place/where/I/keep/my/R/projects"</span>
<span class="op">)</span></code></pre></div>
<p>Save similar code in your <code>.Rprofile</code> and restart R for it to take effect.</p>
</div>
<div id="the-sitrep-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#the-sitrep-functions" class="anchor"></a>The “sitrep” functions</h2>
<p>These functions gather information that help you or others troubleshoot things:</p>
<ul>
<li>
<code><a href="../../reference/proj_sitrep.html">proj_sitrep()</a></code>: prints info about the active usethis project, working directory, and the active RStudio Project. Points out when things are peculiar and how to fix.</li>
<li>
<code><a href="../../reference/git_sitrep.html">git_sitrep()</a></code>: prints info about your current Git, gert, and GitHub setup.</li>
</ul>
<p>“Sitrep” is short for “<strong>sit</strong>uation <strong>rep</strong>ort”.</p>
</div>
<div id="get-a-github-com-account" class="section level2">
<h2 class="hasAnchor">
<a href="#get-a-github-com-account" class="anchor"></a>Get a GitHub.com account</h2>
<p>Sign up for a free account with <a href="https://github.com/">GitHub.com</a>. <a href="https://happygitwithr.com/github-acct.html">Happy Git and GitHub for the useR</a> provides more advice about picking your username.</p>
</div>
<div id="install-git" class="section level2">
<h2 class="hasAnchor">
<a href="#install-git" class="anchor"></a>Install Git</h2>
<p>Please see <a href="https://happygitwithr.com/install-git.html">Happy Git and GitHub for the useR</a> for instructions on how to install Git. It is beyond the scope of this article.</p>
<p>usethis itself does not actually need the Git that you install, because it uses the <a href="https://docs.ropensci.org/gert/">gert</a> package which wraps <a href="https://libgit2.github.com">libgit2</a>. But, chances are, you want to do normal Git things, like diff and commit and push, from RStudio or in the shell and for that you must install Git.</p>
</div>
<div id="configure-user-name-and-user-email" class="section level2">
<h2 class="hasAnchor">
<a href="#configure-user-name-and-user-email" class="anchor"></a>Configure <code>user.name</code> and <code>user.email</code>
</h2>
<p>Once Git is installed, introduce yourself to Git.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span> <span class="co">## or library(devtools)</span>
<span class="fu"><a href="../../reference/use_git_config.html">use_git_config</a></span><span class="op">(</span>user.name <span class="op">=</span> <span class="st">"Jane Doe"</span>, user.email <span class="op">=</span> <span class="st">"jane@example.com"</span><span class="op">)</span>

<span class="co">## check by running a git situation-report: </span>
<span class="co">##   - your user.name and user.email should appear under "User"</span>
<span class="fu"><a href="../../reference/git_sitrep.html">git_sitrep</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><code><a href="../../reference/use_git_config.html">usethis::use_git_config()</a></code> helps you configure your <code>user.name</code> and <code>user.email</code>. Substitute <strong>your name</strong> and <strong>your email address</strong>.</p>
<p>What user name should you give to Git? This does not have to be your GitHub username, although it can be. Another good option is your actual first name and last name. Your commits will be labelled with this name, so this should be informative to potential collaborators.</p>
<p>What email should you give to Git? This must be the email associated with your GitHub account.</p>
<p><code><a href="../../reference/git_sitrep.html">usethis::git_sitrep()</a></code> generates a git situation-report. It can help you confirm things will work as expected; it can also help you diagnose problems.</p>
<div id="equivalent-git-commands" class="section level3">
<h3 class="hasAnchor">
<a href="#equivalent-git-commands" class="anchor"></a>Equivalent Git commands</h3>
<p>The code chunk above is doing the equivalent of this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">git</span> config --global user.name <span class="st">'Jane Doe'</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">git</span> config --global user.email <span class="st">'jane@example.com'</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">git</span> config --global --list</span></code></pre></div>
</div>
<div id="optional-configure-gits-editor" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-configure-gits-editor" class="anchor"></a>Optional: configure Git’s editor</h3>
<p>Another Git option that many people eventually configure is the editor. This will come up if you use Git from a shell. At some point, you will fail to give Git what it wants in terms of a commit message and it will kick you into an editor. This can be distressing, if it’s not your editor of choice and you don’t even know how to save and quit. You can enforce your will by executing this in R:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>

<span class="fu"><a href="../../reference/use_git_config.html">use_git_config</a></span><span class="op">(</span>core.editor <span class="op">=</span> <span class="st">"nano"</span><span class="op">)</span></code></pre></div>
<p>To do the same thing with command line Git, execute this in a shell:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">git</span> config --global core.editor emacs</span></code></pre></div>
<p>Substitute your preferred editor for emacs here. A popular choice is <a href="https://www.nano-editor.org/">nano</a>. The default, if you don’t configure <code>core.editor</code>, is usually vim.</p>
</div>
</div>
<div id="connections-git-github-rstudio" class="section level2">
<h2 class="hasAnchor">
<a href="#connections-git-github-rstudio" class="anchor"></a>Connections: Git, GitHub, RStudio</h2>
<p>As stated above, usethis doesn’t actually use the Git you install and has no absolute requirement that you use GitHub or use RStudio. But use of usethis is highly correlated with the desire to do all of these things, in a pleasant way.</p>
<p>If you plan to use GitHub, you need to make sure your local Git can pull from and push to GitHub.com. That is beyond the scope of this article, but see the <a href="https://happygitwithr.com/push-pull-github.html">Connect to GitHub</a> section in Happy Git. You probably don’t want to enter your username and password all the time, so either <a href="https://happygitwithr.com/credential-caching.html">cache credentials for HTTPS</a> or <a href="https://happygitwithr.com/ssh-keys.html">set up SSH keys</a>. Then set the <code>usethis.protocol</code> option to match, i.e. to either “https” or “ssh”. This setup makes functions like <code><a href="../../reference/use_github.html">usethis::use_github()</a></code> much easier to use.</p>
<p>If you want to use RStudio to work with Git (and therefore GitHub, see previous paragraph), you need to make sure RStudio can find your Git executable. This usually “just works”. The <a href="https://happygitwithr.com/rstudio-git-github.html">Connect RStudio to Git and GitHub</a> section of Happy Git helps you confirm that all is well. If all is not well, there are also <a href="https://happygitwithr.com/rstudio-see-git.html">troubleshooting tips</a>.</p>
</div>
<div id="get-and-store-a-github-personal-access-token" class="section level2">
<h2 class="hasAnchor">
<a href="#get-and-store-a-github-personal-access-token" class="anchor"></a>Get and store a GitHub personal access token</h2>
<p>A GitHub personal access token (PAT) is required if you want to use <code><a href="../../reference/use_github.html">usethis::use_github()</a></code>, <code><a href="../../reference/create_from_github.html">usethis::create_from_github(..., fork = TRUE)</a></code>, and many other usethis functions that need to create something on GitHub, such as a repo, an issue, or a pull request. Unlike pulling and pushing, these are <strong>not</strong> regular Git operations and your usual GitHub credentials do not necessarily work for this (although they <em>can</em>, if you play your cards right; see below).</p>
<p>A PAT is separate from your GitHub password, in the username / password sense (but in some cases you <em>can</em> use a PAT as a password; see below). You must create a PAT explicitly.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>
<span class="fu"><a href="../../reference/github-token.html">create_github_token</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><code><a href="../../reference/github-token.html">usethis::create_github_token()</a></code> takes you to a pre-filled form to request a PAT. You can get to the same page in the browser by clicking on “Generate new token” from <a href="https://github.com/settings/tokens" class="uri">https://github.com/settings/tokens</a>.</p>
<p>As the page says, you must <strong>store this token somewhere</strong> because you’ll never be able to see it again, once you leave that page or close the window. If you somehow goof this up, just generate a new PAT and, so you don’t confuse yourself, delete the lost token.</p>
<p>In the moment, I usually copy the PAT to the clipboard for the next step. (I also store this PAT in my general password manager, for redundancy.) But the most useful place to store this PAT is in your Git credential store.</p>
<div id="git-credential-store" class="section level3">
<h3 class="hasAnchor">
<a href="#git-credential-store" class="anchor"></a>Git credential store</h3>
<div id="gert-and-credentials" class="section level4">
<h4 class="hasAnchor">
<a href="#gert-and-credentials" class="anchor"></a>gert and credentials</h4>
<p>The <a href="https://docs.ropensci.org/credentials/">credentials package</a> is the first R package to interact with the Git credential store from R. It is used for credential handling by the <a href="https://docs.ropensci.org/gert">gert package</a>, which is how usethis does its Git work, and this is a big motivation for using gert. The rOpenSci tech note <a href="https://ropensci.org/technotes/2020/07/07/github-pat/">A better way to manage your GitHub personal access tokens</a> lays out the basic approach.</p>
<p><code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html">credentials::set_github_pat()</a></code> triggers a prompt where you can provide a PAT for github.com. The credentials package then validates it and registers it with your operating system’s Git credential store. This is something you do once. Or, rather, once per machine, per PAT. From that point on, credentials and, therefore, gert and, therefore, usethis should be able to automatically retrieve and use this PAT.</p>
<p>If you use the HTTPS protocol for Git work (as opposed to SSH), this PAT is the only credential you need to configure. It is sufficient for Git work done by usethis/gert/credentials and for GitHub API work done by usethis/gh/gitcreds (see next section).</p>
<p><em>At the time of writing, <code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html">credentials::set_github_pat()</a></code> is hard-wired to work with github.com, although this is likely to change.</em></p>
</div>
<div id="gh-and-gitcreds" class="section level4">
<h4 class="hasAnchor">
<a href="#gh-and-gitcreds" class="anchor"></a>gh and gitcreds</h4>
<p>One goal of usethis v2.0.0 is to provide support for GitHub Enterprise, i.e. instances of GitHub that are <em>not</em> github.com. Many companies and universities use GitHub Enterprise to have their own internal GitHub. Therefore, all PAT handling in usethis has been generalized to work with any GitHub host, defaulting to github.com.</p>
<p>usethis accomplishes all of its GitHub API work through the <a href="https://gh.r-lib.org">gh package</a> and gh + usethis rely on the <a href="https://r-lib.github.io/gitcreds/">gitcreds package</a> to lookup the PAT for any given GitHub host.</p>
<p>Why another package?!? gitcreds is inspired by the <a href="https://docs.ropensci.org/credentials/">credentials package</a>, but offers better support for GitHub deployments that aren’t github.com and for programmatic use from R. (These two packages (credentials and gitcreds) are likely to merge back into one at some point.)</p>
<p>Here’s how to check if you’ve already stored a token that usethis/gh/gitcreds can find:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html">gitcreds_get</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># default is https://github.com</span>

<span class="co"># or for another GitHub deployment</span>
<span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html">gitcreds_get</a></span><span class="op">(</span><span class="st">"https://github.acme.com"</span><span class="op">)</span></code></pre></div>
<p>A github.com PAT stored by <code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html">credentials::set_github_pat()</a></code> should be re-discovered. But if you’re using GitHub Enterprise, you almost certainly won’t have a PAT stored yet.</p>
<p>If you find that you need to store you PAT, do this:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html">gitcreds_set</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># default is https://github.com</span>

<span class="co"># or for another GitHub deployment</span>
<span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html">gitcreds_set</a></span><span class="op">(</span><span class="st">"https://github.acme.com"</span><span class="op">)</span></code></pre></div>
<p>Once stored properly, both credentials/gert and gitcreds/gh should be using the same PAT. Furthermore, both packages cache the PAT in an environment variable for the duration of the R session, which further facilitates PAT reuse over multiple calls, from multiple packages.</p>
</div>
</div>
<div id="renviron" class="section level3">
<h3 class="hasAnchor">
<a href="#renviron" class="anchor"></a><code>.Renviron</code>
</h3>
<p>In the past, the most common way to make a github.com PAT available in R was to define it as an environment variable in the <code>.Renviron</code> startup file. This still works (since credentials/gert and gitcreds/gh check first for an environment variable), but it is less secure than the approaches described above. It is safer to keep your PAT in the Git credential store and to avoid storing it in plain text, in a regular file.</p>
<p>If you still want to use the less secure <code>.Renviron</code> method, <code><a href="../../reference/edit.html">usethis::edit_r_environ()</a></code> opens that file for editing.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>

<span class="fu"><a href="../../reference/edit.html">edit_r_environ</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Add a line like this, <strong>but substitute your PAT</strong>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="va">GITHUB_PAT=</span>8c70fd8419398999c9ac5bacf3192882193cadf2</span></code></pre></div>
<p>Make sure this file ends in a newline! Lack of a newline can lead to silent failure to load startup files, which can be tricky to debug.</p>
<p>Restart R for this to take effect.</p>
</div>
<div id="confirm-your-pat-is-configured" class="section level3">
<h3 class="hasAnchor">
<a href="#confirm-your-pat-is-configured" class="anchor"></a>Confirm your PAT is configured</h3>
<p>These functions should reveal a configured PAT:</p>
<ul>
<li><code><a href="https://gh.r-lib.org/reference/gh_token.html">gh::gh_token()</a></code></li>
<li><code><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html">gitcreds::gitcreds_get()</a></code></li>
</ul>
<p>The PAT situation is also part of what’s reported in <code><a href="../../reference/git_sitrep.html">git_sitrep()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/git_sitrep.html">git_sitrep</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Now usethis (and several other packages) can find this PAT automatically in order to deal with GitHub on your behalf.</p>
</div>
</div>
<div id="prepare-your-system-to-build-packages-from-source" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-your-system-to-build-packages-from-source" class="anchor"></a>Prepare your system to build packages from source</h2>
<p>As you participate more in R development, you will inevitably want to run development versions of other people’s packages, i.e. not the version available from CRAN. A typical way to do this is to install a package from GitHub with <code>devtools::install_github("OWNER/REPO")</code>.</p>
<p>But, unlike using <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> and CRAN, you will be downloading and installing a <em>source</em> package, not a <em>binary</em> package. This means your system needs to be set up for building R packages. And, before long, you will need to build an R package with compiled code in it.</p>
<p>A full description of setting up an R development environment is beyond the scope of this article, but we give some pointers and diagnostics to get you started.</p>
<p>Update R and all of your packages. And expect to keep doing so frequently.</p>
<p><strong>Mac OS</strong>: A convenient way to get the tools needed for compilation is to install Xcode Command Line Tools. Note that this is <em>much smaller</em> than full Xcode. In a shell, enter <code>xcode-select --install</code>. For installing almost anything else, consider using <a href="https://brew.sh">Homebrew</a>.</p>
<p><strong>Windows</strong>: Install Rtools. This is not an R package! It is “a collection of resources for building packages for R under Microsoft Windows, or for building R itself”. Go to <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a> and install as instructed.</p>
<p>There are functions that verify whether R package build tools are installed and available. The home and name of this function is in flux, as it is affected by the restructing of the devtools universe (written early 2018).</p>
<ul>
<li>
<code><a href="https://rdrr.io/pkg/pkgbuild/man/has_build_tools.html">pkgbuild::check_build_tools()</a></code> is the most current function. It can be installed via <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("pkgbuild")</a></code>.</li>
<li>
<code>devtools::has_devel()</code> was a function in devtools, at least up to v1.13.5, so you might still see references to that. All functionality related to package building now lives in pkgbuild. But once you have installed pkgbuild, you should just use the function <code><a href="https://rdrr.io/pkg/pkgbuild/man/has_build_tools.html">pkgbuild::check_build_tools()</a></code> instead.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://jennybryan.org">Jennifer Bryan</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f67d4c46004acc8326e8d95f296a680e',
    indexName: 'usethis',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
